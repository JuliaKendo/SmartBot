### ОБУЧАЕМЫЙ БОТ

Данный бот предназначен для организации технической поддержки пользователей и обладает способностью к обучению. В состав входит два скрипта, один, для взаимодействия с Telegram, а второй, взаимодействует с сообществом "В Контакте". Бот работает совместно с сервисом [Dialog Flow](https://dialogflow.com/), который формирует ответы на запросы пользователей с использованием обучаемой нейросети.

![Alt text](demo_tg_bot.gif) | ![Alt text](demo_vk_bot.gif)
---------------------------- | ----------------------------

Запускают скрипт без параметров

- для работы с telegram:
```
python.exe bot-tg.py
```	

- для работы с сообществом "В Контакте":
```
python.exe bot-vk.py
```	

Перед запуском скрипта настройте следующие переменные окружения:
- `DIALOGFLOW_PROJECT_ID` - идентификатор проекта на сайте [Google.com](https://cloud.google.com/dialogflow/docs/quick/setup).
- `GOOGLE_APPLICATION_CREDENTIALS` - Путь до файла с ключами, который создается в соответствии с документацией [Google.com](https://cloud.google.com/docs/authentication/getting-started).
- `TG_ACCESS_TOKEN` - Секретный токен бота [telegram](https://core.telegram.org/bots/api), который создается перед запуском скрипта.
- `TG_CHAT_ID` - ID чата текущего пользователя телеграмм. Можно получить написав `@userinfobot`. 
- `VK_ACCESS_TOKEN` - Секретный токен для подключения к api сайта [vk.com](http://www.vk.com). У токена должно быть право отправлять сообщения.
- `TG_LOG_TOKEN` - Секретный токена бота [telegram](https://core.telegram.org/bots/api) для сообщения информации об ошибках.

Переменные инициализируются значениями заданными в .env файле.

Информацию о ходе выполнения скрипты отправляют отдельному боту telegram. Токен его должен быть указан в соответствующей переменной окружения.

#### КАК УСТАНОВИТЬ

Для установки выполняют следующие шаги: 
- Создать проект в [Dialog Flow](https://cloud.google.com/dialogflow/docs/quick/setup).
- Создать агента в [Dialog Flow](https://cloud.google.com/dialogflow/docs/quick/build-agent).
- Создать JSON ключ, необходимый для взаимодействия бота с [Dialog Flow](https://cloud.google.com/dialogflow/docs/quick/setup).
- Отредактировать файл .env, в котором заполнить `DIALOGFLOW_PROJECT_ID`, `GOOGLE_APPLICATION_CREDENTIALS`, `TG_ACCESS_TOKEN`, `VK_ACCESS_TOKEN`, `TG_CHAT_ID`, `TG_LOG_TOKEN`.
- Выполнить тренировку агента. Тренировку можно выполнить вручную, или загрузить тренировочные фразы из текстового файла, следующего формата:

```
{
    "Заголовок": {
        "questions": [
            "Вопрос 1",
            "Вопрос 2",
            "Вопрос 3",
            "Вопрос 4"
        ],
        "answer": "Ответ 1"
    }
}

```
Загрузить подготовленный файл с помощью команды:

```
python.exe load_training_phrases.py -f [Имя файла]
```	

Python3 должен быть уже установлен. Для установки зависимостей используйте pip (или pip3, если есть конфликт с Python2):

```
pip install -r requirements.txt
```
В составе скрипта присутствует файл `Procfile`, необходимый для деплоя на сервер [HEROKU](https://heroku.com). Файл уже настроен должным образом, поэтому перенос скрипта на сервер выполняется в соответствии с документацией сервера [HEROKU](https://devcenter.heroku.com/articles/git).

#### ЦЕЛЬ ПРОЕКТА

Код написан в образовательных целях, для изучения возможностей чат-ботов, на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org).
